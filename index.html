<!doctype html>
<html lang="ru">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>–ü–∏—Å—å–º–æ</title>
  <style>
    :root { --bg: #0b0f1a; --paper: #ffffff; --env: #f1f1f1; --shadow: rgba(0,0,0,.25); }
    * { box-sizing: border-box; }
    body{
      margin:0; height:100vh; display:flex; align-items:center; justify-content:center;
      background: radial-gradient(1200px 800px at 50% 30%, #1a2140 0%, var(--bg) 60%);
      font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
      overflow:hidden;
      user-select:none;
      -webkit-tap-highlight-color: transparent;
    }
    .hint{
      position:fixed; top:18px; left:0; right:0; text-align:center;
      font-size:14px; opacity:.75; color:#cdd6ff; padding:0 14px;
    }

    /* Stage container */
    .scene{
      width:min(360px, 92vw);
      height:min(520px, 86vh);
      position:relative;
      display:flex;
      align-items:center;
      justify-content:center;
    }

    /* Envelope wrapper */
    .envelope-wrap{
      width:min(320px, 84vw);
      height:220px;
      position:relative;
      transform: translateY(24px);
      filter: drop-shadow(0 18px 30px var(--shadow));
      cursor:pointer;
    }

    /* Pulse while sealed */
    .stage-1 .envelope-wrap{
      animation: pulse 1.6s ease-in-out infinite;
    }
    @keyframes pulse{
      0%,100%{ transform: translateY(24px) scale(1); }
      50%{ transform: translateY(24px) scale(1.03); }
    }

    /* Envelope body */
    .env{
      position:absolute; inset:0;
      background: linear-gradient(180deg, #f7f7f7, var(--env));
      border-radius: 18px;
      overflow:hidden;
    }

    /* Flap */
    .flap{
      position:absolute; left:-2px; right:-2px; top:-2px; height:62%;
      background: linear-gradient(180deg, #fbfbfb, #e9e9e9);
      transform-origin: top center;
      transform: rotateX(0deg);
      transition: transform 900ms cubic-bezier(.2,.9,.2,1);
      clip-path: polygon(0 0, 100% 0, 50% 85%);
      border-top-left-radius: 18px;
      border-top-right-radius: 18px;
      box-shadow: 0 10px 18px rgba(0,0,0,.08);
    }

    /* Front triangles to look like envelope */
    .front-left, .front-right{
      position:absolute; bottom:0; width:52%; height:70%;
      background: linear-gradient(180deg, #f0f0f0, #e1e1e1);
      clip-path: polygon(0 100%, 100% 0, 100% 100%);
      opacity:.95;
    }
    .front-left{ left:0; }
    .front-right{
      right:0;
      transform: scaleX(-1);
    }
    .front-bottom{
      position:absolute; left:0; right:0; bottom:0; height:62%;
      background: linear-gradient(180deg, #efefef, #dedede);
      clip-path: polygon(0 0, 50% 70%, 100% 0, 100% 100%, 0 100%);
    }

    /* Letter (paper) */
    .letter{
      position:absolute;
      left:18px; right:18px;
      bottom:20px;
      height: 0px;
      background: linear-gradient(180deg, #ffffff, #f6f6ff);
      border-radius: 14px;
      overflow:hidden;
      box-shadow: 0 10px 26px rgba(0,0,0,.18);
      transition:
        height 1100ms cubic-bezier(.2,.9,.2,1),
        transform 1100ms cubic-bezier(.2,.9,.2,1);
      transform: translateY(0px);
      cursor:pointer;
    }
    .letter-inner{
      padding: 18px 18px 22px;
      color:#111827;
      line-height:1.5;
      font-size:15px;
      opacity:0;
      transition: opacity 400ms ease;
    }
    .letter-title{
      font-weight: 700;
      font-size: 17px;
      margin: 0 0 10px 0;
    }
    .letter-text{
      white-space: pre-wrap;
      margin:0;
    }

    /* Stage 2: envelope open + paper slides out (still "closed") */
    .stage-2 .flap{ transform: rotateX(165deg); }
    .stage-2 .letter{
      height: 210px;
      transform: translateY(-56px);
    }
    .stage-2 .hint::after{ content:""; }

    /* Stage 3: paper unfolds and shows text */
    .stage-3 .letter{
      height: 440px;
      transform: translateY(-170px);
    }
    .stage-3 .letter-inner{ opacity:1; }

    /* Small ‚Äúfold line‚Äù effect */
    .fold{
      position:absolute; left:0; right:0; top:46px; height:1px;
      background: rgba(0,0,0,.08);
    }

    /* Prevent selecting */
    .no-select{ -webkit-user-select:none; user-select:none; }
  </style>
</head>
<body class="stage-1">
  <div class="hint no-select" id="hint">–ù–∞–∂–º–∏ –Ω–∞ –∫–æ–Ω–≤–µ—Ä—Ç ‚úâÔ∏è</div>

  <div class="scene">
    <div class="envelope-wrap" id="envelope" role="button" aria-label="–ö–æ–Ω–≤–µ—Ä—Ç">
      <div class="env"></div>
      <div class="flap"></div>
      <div class="front-left"></div>
      <div class="front-right"></div>
      <div class="front-bottom"></div>

      <div class="letter" id="letter" role="button" aria-label="–õ–∏—Å—Ç">
        <div class="fold"></div>
        <div class="letter-inner" id="letterInner">
          <div class="letter-title">–ú–æ—ë –ø–∏—Å—å–º–æ —Ç–µ–±–µ</div>
          <p class="letter-text" id="letterText"></p>
        </div>
      </div>
    </div>
  </div>

  <script>
    // –í—Å—Ç–∞–≤—å —Å—é–¥–∞ —Ç–µ–∫—Å—Ç –ø–∏—Å—å–º–∞
    const LETTER_TEXT =
`
–ó–¥—Ä–∞–≤—Å—Ç–≤—É–π, –Æ–ª–µ—á–∫–∞!

–ï—Å–ª–∏ —Ç—ã —ç—Ç–æ —á–∏—Ç–∞–µ—à—å, —Ç–æ –º–æ–≥—É —Ç–µ–±—è –ø–æ–∑–¥—Ä–∞–≤–∏—Ç—å - —Ç—ã –ø–æ–ª—É—á–∏–ª–∞ –ø–∏—Å—å–º–æ –õ—é–±–≤–∏!
–Ø —Ö–æ—á—É —Å–∫–∞–∑–∞—Ç—å —Ç–µ–±–µ –Ω–∞ —Å–∫–æ–ª—å–∫–æ —Ç—ã –∫—Ä–∞—Å–∏–≤–∞—è, –¥–æ–±—Ä–∞—è, –≤–µ—Å—ë–ª–∞—è, —Å–Ω–æ–≥—à–µ–±–∞—Ç–µ–ª—å–Ω–∞—è!
–¢—ã –∏–¥–µ–∞–ª—å–Ω–∞ –≤–æ –≤—Å—ë–º, —É —Ç–µ–±—è –Ω–µ—Ç—É –º–∏–Ω—É—Å–æ–≤, —Ç—ã –ø—Ä–æ—Å—Ç–æ –ø—Ä–µ–ª–µ—Å—Ç—å!
–Ø –¥–æ –±–µ–∑—É–º–∏—è —Ä–∞–¥, —á—Ç–æ –º—ã –Ω–∞—à–ª–∏ –¥—Ä—É–≥ –¥—Ä—É–≥–∞ –∏ —è —Å—á–∞—Å—Ç–ª–∏–≤, —á—Ç–æ —É –Ω–∞—Å –≤—Å–µ –∏–¥–µ—Ç –∫ –æ—Ç–Ω–æ—à–µ–Ω–∏—è–º!
–Ø –æ–±–æ–∂–∞—é –≤—Å—ë, —Ç–≤–æ–π –∑–∞–ø–∞—Ö, —Ç–≤–æ—é —É–ª—ã–±–∫—É, —Ç–≤–æ–∏ –≥–ª–∞–∑–∞, —Ç–≤–æ—é –¥—É—à—É!
–î–∞ —á—Ç–æ —É–∂ —Ç–∞–º, —è –ø—Ä–æ—Å—Ç–æ —Ç–µ–±—è –æ–±–æ–∂–∞—é!
–Ø –≤–µ—Ä—é, —á—Ç–æ —É –Ω–∞—Å —Å —Ç–æ–±–æ–π –≤—Å–µ –ø–æ–ª—É—á–∏—Ç—Å—è, –≤—Å–µ –±—É–¥–µ—Ç —Ö–æ—Ä–æ—à–æ –∏ –º—ã –±—É–¥–µ–º –≤–º–µ—Å—Ç–µ!
–Ø —Å –Ω–µ—Ç–µ—Ä–ø–µ–Ω–∏–µ–º –∂–¥—É —Ç–≤–æ–∏—Ö —Å–ø—Ä—è—Ç–∞–Ω–Ω—ã—Ö —á—É–≤—Å—Ç–≤ –∏ –ø—Ä–æ–ø–∞–∂—É —Ç–≤–æ–µ–≥–æ —Å—Ç—Ä–∞—Ö–∞!
–Ø —Ö–æ—á—É —á—Ç–æ –±—ã —Ç—ã –º–Ω–µ –≤–µ—Ä–∏–ª–∞, –¥–æ–≤–µ—Ä—è–ª–∞, –≤–µ–¥—å –±–µ–∑ —ç—Ç–æ–≥–æ –æ—Ç–Ω–æ—à–µ–Ω–∏—è –Ω–µ –æ—Ç–Ω–æ—à–µ–Ω–∏—è!
–Ø –≥–æ—Ç–æ–≤ –¥–µ–ª–∞—Ç—å –≤—Å—ë - –∂–¥–∞—Ç—å, –¥–æ–≤–µ—Ä—è—Ç—å, –ª—é–±–∏—Ç—å!
–Ø –≤–µ—Ä—é –≤ –Ω–∞—à–µ –±—É–¥—É—â–µ–µ –∏ –Ω–∞–¥–µ—é—Å—å, —á—Ç–æ —Ç—ã —Ç–æ–∂–µ!

–° –ª—é–±–æ–≤—å—é, —Ç–≤–æ–π –î–µ–Ω–∏—Å! ü§ç
`;

    document.getElementById("letterText").textContent = LETTER_TEXT;

    const body = document.body;
    const envelope = document.getElementById("envelope");
    const letter = document.getElementById("letter");
    const hint = document.getElementById("hint");

    let stage = 1; // 1=sealed, 2=envelope open, 3=letter open

    // –ù–∞–∂–∞—Ç–∏–µ –Ω–∞ –∫–æ–Ω–≤–µ—Ä—Ç: 1 -> 2
    envelope.addEventListener("click", (e) => {
      // –µ—Å–ª–∏ –∫–ª–∏–∫–Ω—É–ª–∏ –ø–æ –ª–∏—Å—Ç—É, –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –Ω–∏–∂–µ —Ä–∞–∑—Ä—É–ª–∏—Ç
      if (e.target.closest("#letter")) return;

      if (stage === 1) {
        stage = 2;
        body.classList.remove("stage-1");
        body.classList.add("stage-2");
        hint.textContent = "–ù–∞–∂–º–∏ –Ω–∞ –ª–∏—Å—Ç üìÑ";
      }
    });

    // –ù–∞–∂–∞—Ç–∏–µ –Ω–∞ –ª–∏—Å—Ç: 2 -> 3, 3 -> (–Ω–∏—á–µ–≥–æ)
    letter.addEventListener("click", (e) => {
      e.stopPropagation();
      if (stage === 2) {
        stage = 3;
        body.classList.remove("stage-2");
        body.classList.add("stage-3");
        hint.textContent = "üíå";
      }
    });
  </script>
</body>
</html>
<!-- redeploy -->
